In the name of God

Mostly from these 3, only changed to use the most recent versions of packages:
https://www.digitalocean.com/community/tutorials/how-to-install-linux-apache-mysql-php-lamp-stack-on-ubuntu-22-04
https://www.digitalocean.com/community/tutorials/how-to-install-and-configure-laravel-with-nginx-on-ubuntu-22-04
https://www.digitalocean.com/community/tutorials/how-to-install-wordpress-on-ubuntu-22-04-with-a-lamp-stack

# Prereqs

From https://github.com/oerdnj/deb.sury.org/issues/56

- apt update && apt upgrade
- Add this to `.bashrc`:

LC_ALL=en_US.UTF-8
LANG=en_US.UTF-8

- apt-get install language-pack-en-base software-properties-common apt-transport-https curl
- locale-gen en_US.UTF-8

# Maybe, MariaDb Mirror

Only rsync version 11.0: (10GB as of now)

- rsync -vvv --archive --partial --delete-after --delay-updates mirror.netcologne.de::mariadb/repo/11.0/ubuntu /root/mariadb-repo/repo/11.0/ubuntu

The whole thing:

- rsync -vvv --archive --partial --delete-after --delay-updates mirror.netcologne.de::mariadb /root/mariadb-repo

Then run an `http-server` in `/root/mariadb-repo` and set `/etc/apt/sources.list.d/mariadb.list` to this (while doing things below!):

```
# MariaDB 11.0 [RC] repository list - created 2023-04-25 18:51 UTC
# https://mariadb.org/download/
deb http://31.7.74.161:8080/repo/11.0/ubuntu jammy main
# deb-src http://31.7.74.161:8080/repo/11.0/ubuntu jammy main
```

# Install

From:
- deb.sury.org
- https://mariadb.org/download/?t=repo-config

- apt-add-repository ppa:ondrej/php
- apt-add-repository ppa:ondrej/apache2
- apt-add-repository ppa:ondrej/nginx-mainline

- sudo curl -o /etc/apt/trusted.gpg.d/mariadb_release_signing_key.asc 'https://mariadb.org/mariadb_release_signing_key.asc'
- Make a file with this content in `/etc/apt/sources.list.d/mariadb.list`:

```
# MariaDB 11.0 [RC] repository list - created 2023-04-26 06:44 UTC
# https://mariadb.org/download/
deb https://mirror.netcologne.de/mariadb/repo/11.0/ubuntu jammy main
# deb-src https://mirror.netcologne.de/mariadb/repo/11.0/ubuntu jammy main
```

- apt update

- apt install php apache2 mariadb-server libapache2-mod-php php-mysql php-mbstring php-xml php-bcmath php-curl

# Config

- mariadb-secure-installation
- useradd -m lamp

## Simple site

- mkdir /var/www/DOMAIN
- chown -R lamp:lamp /var/www/DOMAIN
- nano /etc/apache2/sites-available/DOMAIN.conf

```
<VirtualHost *:80>
    ServerName your_domain
    ServerAlias www.your_domain 
    ServerAdmin webmaster@localhost
    DocumentRoot /var/www/your_domain
    ErrorLog ${APACHE_LOG_DIR}/error.log
    CustomLog ${APACHE_LOG_DIR}/access.log combined
</VirtualHost>
```

## Wordpress

## Laravel

- Create database and db user:
  - sudo mysql (or `mysql -u root -p`)
    - CREATE DATABASE wordpress DEFAULT CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci;
    - CREATE USER 'user'@'%' IDENTIFIED WITH mysql_native_password USING PASSWORD('abc');
